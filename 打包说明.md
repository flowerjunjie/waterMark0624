# 水印工具打包说明

本项目使用Electron和React开发，可以通过多种方式进行打包。

## 准备工作

确保你已经安装了Node.js环境(建议版本>=14.0.0)，并且执行过`npm install`安装了所有依赖。

## 打包方式

本项目提供了三种打包脚本，可以根据不同情况选择使用：

### 1. 标准打包 (打包.bat)

适用于大多数情况，执行以下步骤：
1. 安装所需依赖
2. 构建React应用
3. 使用electron-builder打包为可执行文件

```
双击 打包.bat
```

### 2. 管理员权限打包 (管理员打包.bat)

当标准打包因为权限问题失败时，使用此脚本以管理员权限执行打包过程：

```
右键 管理员打包.bat -> 以管理员身份运行
```

### 3. 降级打包 (降级打包.bat)

当系统兼容性问题导致打包失败时，可尝试使用此脚本，它会安装较低版本的Electron和electron-builder：

```
双击 降级打包.bat
```

## 打包输出

所有打包脚本成功执行后，会在项目根目录下生成`release`文件夹，其中包含可执行文件`水印工具.exe`。

## 常见问题

1. **打包时出现编译错误**
   - 确保安装了所有依赖：`npm install`
   - 检查是否有TypeScript类型错误：`npx tsc --noEmit`

2. **打包成功但应用无法启动**
   - 检查electron.js中的路径配置
   - 检查favicon.ico文件是否存在
   - 尝试使用降级打包脚本

3. **资源路径问题**
   - 确保所有资源路径使用相对路径
   - 确保资源文件已包含在electron-builder.json的配置中

## 调试模式

如需在开发环境中测试应用，可以使用：

```
双击 dev.bat
```

或者直接运行：

```
npm run electron:dev
``` 