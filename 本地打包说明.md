# 使用本地Electron包打包说明

本项目已成功配置为使用本地Electron包进行打包，避免每次从网络下载浪费时间。

## 打包方法

### 方法一：使用PowerShell脚本（推荐）

1. 确保项目根目录中有`electron-v13.6.9-win32-x64.zip`文件
2. 右键点击`本地打包.ps1`，选择"使用PowerShell运行"
3. 等待打包完成，打包后的文件将在`release`目录中

### 方法二：使用PowerShell命令

1. 确保项目根目录中有`electron-v13.6.9-win32-x64.zip`文件
2. 打开PowerShell，进入项目目录
3. 运行以下命令：

```powershell
# 复制Electron包到缓存目录
if (-not (Test-Path "$env:LOCALAPPDATA\electron\Cache")) { 
    New-Item -Path "$env:LOCALAPPDATA\electron\Cache" -ItemType Directory -Force | Out-Null 
}
Copy-Item -Path "electron-v13.6.9-win32-x64.zip" -Destination "$env:LOCALAPPDATA\electron\Cache\" -Force

# 设置环境变量并打包
$env:ELECTRON_CACHE="$env:LOCALAPPDATA\electron\Cache"
$env:ELECTRON_SKIP_BINARY_DOWNLOAD=1
npm run build
npx electron-builder --win --config electron-builder.json
```

## 打包结果

打包后的文件将在`release\win-unpacked`目录中，其中`水印工具.exe`是可执行文件。

## 注意事项

- 确保本地有`electron-v13.6.9-win32-x64.zip`文件
- 如果打包失败，请检查缓存目录`%LOCALAPPDATA%\electron\Cache`是否有Electron包
- 使用electron-builder 22.14.13版本可以确保兼容性